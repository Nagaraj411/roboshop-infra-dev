# ðŸ” Roboshop Security Groups & Ingress Rules

### ðŸ“¦ Security Group Classification

      | ðŸ”– **Category**      | ðŸ§© **Components**                                  |
      | ------------------------------------------------------------------------- |
      | ðŸ—„ï¸ **DB**            | `mongodb`, `redis`, `mysql`, `rabbitmq`            |
      | âš™ï¸ **APP**           | `catalogue`, `user`, `cart`, `shipping`, `payment` |
      | ðŸŽ¯ **BACKEND\_ALB**  | â€”                                                  |
      | ðŸŒ **FRONTEND**      | â€”                                                  |
      | ðŸŽ¯ **FRONTEND\_ALB** | â€”                                                  |
      | ðŸ” **VPN**           | â€”                                                  |
      | ðŸ› ï¸ **BASTION**       | â€”                                                  |

# ðŸ›¡ï¸ Ingress Rules per Component

### ðŸ“š MongoDB

      | ðŸ”‘ **Rule Name**    | ðŸŽ¯ **Purpose**                    |
      | -------------------------------------------------------- |
      | `mongodb_vpn`       | ðŸ”“ Allow `22`, `27017` from `vpn` |
      | `mongodb_catalogue` | ðŸ”“ Allow `27017` from `catalogue` |
      | `mongodb_user`      | ðŸ”“ Allow `27017` from `user`      |

### âš¡ Redis

      | ðŸ”‘ **Rule Name** | ðŸŽ¯ **Purpose**                   |
      | ---------------------------------------------------- |
      | `mysql_vpn`      | ðŸ”“ Allow `22`, `3306` from `vpn` |
      | `mysql_shipping` | ðŸ”“ Allow `3306` from `shipping`  |

### ðŸ—„ï¸ MySQL

      | ðŸ”‘ **Rule Name** | ðŸŽ¯ **Purpose**                   |
      | ---------------------------------------------------- |
      | `mysql_vpn`      | ðŸ”“ Allow `22`, `3306` from `vpn` |
      | `mysql_shipping` | ðŸ”“ Allow `3306` from `shipping`  |

### ðŸ“¨ RabbitMQ

      | ðŸ”‘ **Rule Name**   | ðŸŽ¯ **Purpose**                   |
      | ------------------------------------------------------ |
      | `rabbitmq_vpn`     | ðŸ”“ Allow `22`, `5672` from `vpn` |
      | `rabbitmq_payment` | ðŸ”“ Allow `5672` from `payment`   |

### ðŸ§© Catalogue

      | ðŸ”‘ **Rule Name**        | ðŸŽ¯ **Purpose**                     |
      | ------------------------------------------------------------- |
      | `catalogue_vpn`         | ðŸ”“ Allow `22` from `vpn`           |
      | `catalogue_backend_alb` | ðŸ”“ Allow `8080` from `backend_alb` |


## âœ… Notes

### ðŸ”¢ Standard Service Ports

      | ðŸ’  **Service**        | ðŸ”Œ **Port**   |
      |----------------------------------------|
      | ðŸ” SSH                | `22`          |
      | ðŸ“š MongoDB            | `27017`       |
      | âš¡ Redis              | `5679`        |
      | ðŸ—„ï¸ MySQL              | `3306`        |
      | ðŸ“¨ RabbitMQ           | `5672`        |
      | ðŸ§© App Services       | `8080`        |


### ðŸ“˜ Implementation Guidelines

      - ðŸ§± All rules are implemented using `aws_security_group_rule`.
      - ðŸ” Inter-service communication is restricted via `source_security_group_id`.
      - ðŸš« No public access (`0.0.0.0/0`) is allowed **unless explicitly required** (e.g., for ALBs).
      - ðŸ›¡ï¸ Security Groups follow **least privilege** principle to minimize attack surface.
      - ðŸ§© Each microservice has its **own isolated security group** for better control.
      - ðŸ”„ Rules are **modular** and can be reused across environments.


This is 10-sg is the child folder
main parent is terraform-aws-security group

copy git link  paste in 10-sg folder as a source

ðŸ” Flow with Inputs and Outputs
   * VPC
    |
    |---> ðŸ›¡ï¸ Security Group (SG)
    |         ðŸ“¥ Input: vpc_id
    |         ðŸ“¤ Output: sg_id
    |
    |---> ðŸ’» EC2 Instance
              ðŸ“¥ Input: sg_id



# ðŸ” Catalogue SG Rules (Simplified)

      ðŸ“œ Backend_ALB  ---> catalogue : 8080   # App traffic
      ðŸ“œ VPN          ---> catalogue : 8080   # Internal access

      ðŸ“œ Bastion      ---> catalogue : 22     # SSH access
      ðŸ“œ VPN          ---> catalogue : 22     # SSH access

      ðŸ“œ catalogue    ---> MongoDB   : 27017  # DB connection