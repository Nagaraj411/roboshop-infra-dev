# ðŸ” Security Group Rules Matrix

      | ðŸ§± **Component**     | ðŸ”¢ **Port(s)**     | ðŸ”„ **Protocol** | ðŸ”“ **Access From**                                        | ðŸ“ **Purpose**                     |
      | --------------------  | ------------------  | --------------- | --------------------------------------------------------- | ---------------------------------- |
      | ðŸ”‘ **Bastion**       | 22                 | TCP             | ðŸŒ `0.0.0.0/0`                                             | SSH to EC2                         |
      | ðŸ” **VPN**           | 22, 443, 943, 1194 | TCP             | ðŸŒ `0.0.0.0/0`                                             | VPN connectivity                   |
      | ðŸ—„ï¸ **MongoDB**       | 22, 27017          | TCP             | ðŸ” VPN, ðŸ”‘ Bastion, ðŸ“¦ Catalogue, ðŸ‘¥ User                 | DB access (SSH + MongoDB)          |
      | ðŸ§  **Redis**         | 22, 6379           | TCP             | ðŸ” VPN, ðŸ”‘ Bastion, ðŸ‘¥ User, ðŸ›’ Cart                      | Cache access (SSH + Redis)         |
      | ðŸ›¢ï¸ **MySQL**         | 22, 3306           | TCP             | ðŸ” VPN, ðŸ”‘ Bastion, ðŸšš Shipping                           | DB access (SSH + MySQL)            |
      | ðŸ‡ **RabbitMQ**      | 22, 5672           | TCP             | ðŸ” VPN, ðŸ”‘ Bastion, ðŸ’³ Payment                            | MQ access (SSH + AMQP)             |
      | ðŸ“¦ **Catalogue**     | 8080, 22           | TCP             | ðŸ” VPN, ðŸ”‘ Bastion, ðŸŒ Backend ALB                        | API + SSH access                   |
      | ðŸ‘¥ **User**          | 8080, 22           | TCP             | ðŸ” VPN, ðŸ”‘ Bastion, ðŸŒ Backend ALB                        | API + SSH access                   |
      | ðŸ›’ **Cart**          | 8080, 22           | TCP             | ðŸ” VPN, ðŸ”‘ Bastion, ðŸŒ Backend ALB                        | API + SSH access                   |
      | ðŸšš **Shipping**      | 8080, 22           | TCP             | ðŸ” VPN, ðŸ”‘ Bastion, ðŸŒ Backend ALB                        | API + SSH access                   |
      | ðŸ’³ **Payment**       | 8080, 22           | TCP             | ðŸ” VPN, ðŸ”‘ Bastion, ðŸŒ Backend ALB                        | API + SSH access                   |
      | ðŸŒ **Backend ALB**   | 80                 | TCP             | ðŸ” VPN, ðŸ”‘ Bastion, ðŸ”¼ Frontend, ðŸ›’ Cart, ðŸšš Ship, ðŸ’³ Pay | Load Balancer for Backend Services |
      | ðŸŒ **Frontend ALB**  | 80, 443            | TCP             | ðŸŒ `0.0.0.0/0`                                            | Public Load Balancer               |
      | ðŸ–¥ï¸ **Frontend App**  | 22, 80             | TCP             | ðŸ” VPN, ðŸ”‘ Bastion, ðŸŒ Frontend ALB                       | App access + ALB connection        |

## âœ… Notes

### ðŸ”¢ Standard Service Ports

      | ðŸ’  **Service**        | ðŸ”Œ **Port**   |
      |----------------------------------------|
      | ðŸ” SSH                | `22`          |
      | ðŸ“š MongoDB            | `27017`       |
      | âš¡ Redis              | `5679`        |
      | ðŸ—„ï¸ MySQL              | `3306`        |
      | ðŸ“¨ RabbitMQ           | `5672`        |
      | ðŸ§© App Services       | `8080`        |


### ðŸ“˜ Implementation Guidelines

      - ðŸ§± All rules are implemented using `aws_security_group_rule`.
      - ðŸ” Inter-service communication is restricted via `source_security_group_id`.
      - ðŸš« No public access (`0.0.0.0/0`) is allowed **unless explicitly required** (e.g., for ALBs).
      - ðŸ›¡ï¸ Security Groups follow **least privilege** principle to minimize attack surface.
      - ðŸ§© Each microservice has its **own isolated security group** for better control.
      - ðŸ”„ Rules are **modular** and can be reused across environments.


This is 10-sg is the child folder
main parent is terraform-aws-security group

copy git link  paste in 10-sg folder as a source

ðŸ” Flow with Inputs and Outputs
   * VPC
    |
    |---> ðŸ›¡ï¸ Security Group (SG)
    |         ðŸ“¥ Input: vpc_id
    |         ðŸ“¤ Output: sg_id
    |
    |---> ðŸ’» EC2 Instance
              ðŸ“¥ Input: sg_id



# ðŸ” Catalogue SG Rules (Simplified)

      ðŸ“œ Backend_ALB  ---> catalogue : 8080   # App traffic
      ðŸ“œ VPN          ---> catalogue : 8080   # Internal access

      ðŸ“œ Bastion      ---> catalogue : 22     # SSH access
      ðŸ“œ VPN          ---> catalogue : 22     # SSH access

      ðŸ“œ catalogue    ---> MongoDB   : 27017  # DB connection